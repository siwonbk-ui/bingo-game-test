<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo 9x9 | Premium Edition</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>

<body>
    <div class="background-globes">
        <div class="globe globe-1"></div>
        <div class="globe globe-2"></div>
    </div>

    <div id="login-container" class="login-container">
        <div class="login-card">
            <h1>Sustain Together#2</h1>
            <p>Enter your 3-digit User ID</p>
            <input type="text" id="user-id-input" maxlength="3" placeholder="###" inputmode="numeric">
            <input type="password" id="user-password-input" placeholder="Password" style="margin-top: 10px;">

            <button id="btn-login" class="btn primary full-width">Enter Game</button>
            <p id="login-error" class="error-msg"></p>
        </div>
    </div>

    <div id="app-container" class="app-container hidden">
        <header>
            <div class="header-content">
                <div>
                    <h1>BINGO <span class="accent">9x9</span></h1>
                    <p class="subtitle" id="user-role-display">Premium Game Experience</p>
                </div>
                <button id="btn-download-report" class="btn secondary hidden" style="margin-right: 0.5rem;">Download
                    Report üì•</button>
                <button id="btn-admin-panel" class="btn secondary hidden">Manage Users</button>
            </div>
        </header>

        <div class="game-board">
            <div id="grid-container" class="grid-container">
                <!-- Grid items generated by JS -->
            </div>

            <div class="legend-scale">
                <h3>Reference List</h3>
                <div class="legend-grid">
                    <div class="legend-item"><span class="num">1</span> <span>‡∏ô‡∏≥‡πÅ‡∏Å‡πâ‡∏ß‡∏ô‡πâ‡∏≥‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÑ‡∏õ‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏ï‡∏π‡πâ‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°</span>
                    </div>
                    <div class="legend-item"><span class="num">2</span> <span>‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏¢‡∏∞ Recycle ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ñ‡∏±‡∏á</span></div>
                    <div class="legend-item"><span class="num">3</span> <span>‡∏õ‡∏¥‡∏î‡πÑ‡∏ü/
                            ‡∏ñ‡∏≠‡∏î‡∏õ‡∏•‡∏±‡πä‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span></div>
                    <div class="legend-item"><span class="num">4</span> <span>‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</span></div>
                    <div class="legend-item"><span class="num">5</span> <span>‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</span></div>
                    <div class="legend-item"><span class="num">6</span> <span>‡πÉ‡∏ä‡πâ‡∏ñ‡∏∏‡∏á‡∏ú‡πâ‡∏≤</span></div>
                    <div class="legend-item"><span class="num">7</span> <span>‡∏ô‡∏≥‡πÅ‡∏Å‡πâ‡∏ß‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÑ‡∏õ‡∏ã‡∏∑‡πâ‡∏≠‡∏ô‡πâ‡∏≥‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô</span></div>
                    <div class="legend-item"><span class="num">8</span> <span>‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ó‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏ô</span></div>
                    <div class="legend-item"><span class="num">9</span> <span>‡∏õ‡∏•‡∏π‡∏Å‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ 1 ‡∏ï‡πâ‡∏ô (‡∏ï‡πâ‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ)</span>
                    </div>
                    <div class="legend-item"><span class="num">10</span> <span>‡πÇ‡∏û‡∏™‡∏ï‡πå Facebook ‡πÇ‡∏î‡∏¢‡∏ï‡∏¥‡∏î Hashtag :
                            #ChiaTaiSustainTogetherYear2026</span></div>
                    <div class="legend-item"><span class="num">11</span> <span>‡∏õ‡∏¥‡∏î‡∏ô‡πâ‡∏≥‡∏ï‡∏≠‡∏ô‡πÅ‡∏õ‡∏£‡∏á‡∏ü‡∏±‡∏ô</span></div>
                    <div class="legend-item"><span class="num">12</span> <span>‡πÉ‡∏ä‡πâ‡∏ñ‡∏∏‡∏∏‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥</span></div>
                    <div class="legend-item"><span class="num">13</span> <span>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏î‡∏¥‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î</span></div>
                    <div class="legend-item"><span class="num">14</span> <span>‡∏Å‡∏¥‡∏ô‡∏ú‡∏±‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û 1 ‡∏°‡∏∑‡πâ‡∏≠</span>
                    </div>
                    <div class="legend-item"><span class="num">15</span> <span>‡πÄ‡∏î‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 3,000 ‡∏Å‡πâ‡∏≤‡∏ß‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</span></div>
                    <div class="legend-item"><span class="num">16</span>
                        <span>‡∏ô‡∏≥‡∏Å‡∏•‡πà‡∏≠‡∏á/‡∏ã‡∏≠‡∏á‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥</span>
                    </div>
                    <div class="legend-item"><span class="num">17</span> <span>‡∏û‡∏Å‡∏´‡∏•‡∏≠‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÉ‡∏ä‡πâ‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥
                            ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏´‡∏•‡∏≠‡∏î‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å</span></div>
                    <div class="legend-item"><span class="num">18</span> <span>‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏ö‡πâ‡∏≤‡∏ô 1 ‡∏°‡∏∑‡πâ‡∏≠</span>
                    </div>
                    <div class="legend-item"><span class="num">19</span>
                        <span>‡πÅ‡∏ä‡∏£‡πå‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏£‡∏±‡∏Å‡∏©‡πå‡πÇ‡∏•‡∏Å‡πÉ‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏Å‡∏•‡∏∏‡πà‡∏°</span>
                    </div>
                    <div class="legend-item"><span class="num">20</span> <span>‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡πÑ‡∏î‡πâ</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button id="btn-new-game" class="btn primary">New Game</button>
            <button id="btn-save" class="btn secondary">Save Game</button>
            <button id="btn-reset" class="btn secondary">Reset Board</button>
        </div>
    </div>

    <!-- Admin Dashboard (Hidden by default) -->
    <div id="admin-container" class="app-container hidden">
        <header>
            <h1>User <span class="accent">Management</span></h1>
            <button id="btn-import-users" class="btn secondary" style="margin-right: 0.5rem;">Import CSV üìÇ</button>
            <button id="btn-export-users" class="btn primary" style="margin-right: 1rem;">Export User List</button>
            <button id="btn-back-game" class="btn secondary">Back to Game</button>
        </header>

        <div class="admin-panel">
            <div class="add-user-form">
                <h3>Add New User</h3>
                <div class="form-group">
                    <input type="text" id="new-user-id" placeholder="User ID (3 digits)" maxlength="3">
                    <input type="password" id="new-user-password" placeholder="Password">
                    <input type="text" id="new-user-name" placeholder="Display Name">
                    <select id="new-user-role">
                        <option value="player">Player</option>
                        <option value="admin">Admin</option>
                    </select>
                    <button id="btn-add-user" class="btn primary">Add User</button>
                </div>
            </div>

            <div class="user-list-container">
                <h3>Current Users</h3>
                <div class="table-header">
                    <span>ID</span>
                    <span>Password</span>
                    <span>Name</span>
                    <span>Role</span>
                    <span>Action</span>
                </div>
                <div id="user-list" class="user-list">
                    <!-- User items generated by JS -->
                </div>
            </div>
        </div>
    </div>

    <div id="win-overlay" class="win-overlay hidden">
        <div class="win-content">
            <h2 id="win-title" class="bingo-text">BINGO!</h2>
            <div style="display: flex; gap: 1rem; justify-content: center;">
                <button id="btn-continue-game" class="btn secondary large">Track & Continue</button>
            </div>
        </div>
    </div>

    <div id="upload-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Upload Proof</h3>
            <p>Upload an image to mark this cell.</p>
            <input type="file" id="file-input" accept="image/*">
            <div id="image-preview" class="image-preview hidden"></div>
            <div class="modal-actions">
                <button id="btn-delete-upload" class="btn danger hidden">Delete</button>
                <button id="btn-cancel-upload" class="btn secondary">Cancel</button>
                <button id="btn-confirm-upload" class="btn primary" disabled>Save Photo</button>
            </div>
        </div>
    </div>



    <div id="toast" class="toast hidden">Game Saved! üíæ</div>

    <!-- Admin Gallery Modal -->
    <div id="gallery-modal" class="modal hidden">
        <div class="modal-content large-modal">
            <h3>System Gallery</h3>
            <!-- Search Bar -->
            <div style="margin-bottom: 20px; display: flex; gap: 10px;">
                <input type="text" id="gallery-search-input" placeholder="Search by User ID..."
                    style="flex: 1; padding: 10px; font-size: 1rem; border: 1px solid #ccc; border-radius: 5px;">
            </div>
            <div id="gallery-grid" class="gallery-grid">
                <!-- Images will load here -->
            </div>
            <button class="btn btn-secondary"
                onclick="document.getElementById('gallery-modal').classList.add('hidden')">Close</button>
        </div>
    </div>

    <div id="setup-password-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Set Your Password</h3>
            <p>First time login requires setting a 6-digit password.</p>
            <input type="password" id="setup-new-password" placeholder="New Password (6 digits)" maxlength="6"
                inputmode="numeric">
            <div class="modal-actions">
                <button id="btn-confirm-setup" class="btn primary full-width">Set Password & Login</button>
            </div>
        </div>
    </div>

    <div id="import-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Import Users (CSV)</h3>
            <p>Format: <code>ID,Name,Role,Password</code></p>
            <p style="font-size: 0.8rem; color: #666;">Example: <code>100001,John Doe,viewer,123456</code></p>
            <textarea id="import-csv-data" rows="10" placeholder="Paste your CSV data here..."
                style="width: 100%; margin-top: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-family: monospace;"></textarea>
            <div class="modal-actions">
                <button id="btn-cancel-import" class="btn secondary">Cancel</button>
                <button id="btn-confirm-import" class="btn primary">Import Users</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>